"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.SYSLOG_SERVICE_NAME = exports.SyslogService = void 0;

require("source-map-support/register");

var _syslogDecoder = _interopRequireDefault(require("./transformer/syslog-decoder"));

var _constants = require("../constants");

var _baseService = require("../base-service");

const SYSLOG_SERVICE_NAME = 'com.apple.syslog_relay';
exports.SYSLOG_SERVICE_NAME = SYSLOG_SERVICE_NAME;
const START_MESSAGE = 'start';

class SyslogService extends _baseService.BaseServiceSocket {
  constructor(socketClient) {
    super(socketClient);
    this._decoder = new _syslogDecoder.default(5 * _constants.KB);

    this._socketClient.pipe(this._decoder);
  }

  start(callback) {
    this._decoder.on('data', callback);

    this._socketClient.write(START_MESSAGE);
  }

}

exports.SyslogService = SyslogService;
var _default = SyslogService;
exports.default = _default;require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9zeXNsb2cvaW5kZXguanMiXSwibmFtZXMiOlsiU1lTTE9HX1NFUlZJQ0VfTkFNRSIsIlNUQVJUX01FU1NBR0UiLCJTeXNsb2dTZXJ2aWNlIiwiQmFzZVNlcnZpY2VTb2NrZXQiLCJjb25zdHJ1Y3RvciIsInNvY2tldENsaWVudCIsIl9kZWNvZGVyIiwiU3lzbG9nRGVjb2RlciIsIktCIiwiX3NvY2tldENsaWVudCIsInBpcGUiLCJzdGFydCIsImNhbGxiYWNrIiwib24iLCJ3cml0ZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFDQTs7QUFDQTs7QUFDQTs7QUFJQSxNQUFNQSxtQkFBbUIsR0FBRyx3QkFBNUI7O0FBQ0EsTUFBTUMsYUFBYSxHQUFHLE9BQXRCOztBQUVBLE1BQU1DLGFBQU4sU0FBNEJDLDhCQUE1QixDQUE4QztBQUM1Q0MsRUFBQUEsV0FBVyxDQUFFQyxZQUFGLEVBQWdCO0FBQ3pCLFVBQU1BLFlBQU47QUFFQSxTQUFLQyxRQUFMLEdBQWdCLElBQUlDLHNCQUFKLENBQWtCLElBQUlDLGFBQXRCLENBQWhCOztBQUNBLFNBQUtDLGFBQUwsQ0FBbUJDLElBQW5CLENBQXdCLEtBQUtKLFFBQTdCO0FBRUQ7O0FBV0RLLEVBQUFBLEtBQUssQ0FBRUMsUUFBRixFQUFZO0FBQ2YsU0FBS04sUUFBTCxDQUFjTyxFQUFkLENBQWlCLE1BQWpCLEVBQXlCRCxRQUF6Qjs7QUFDQSxTQUFLSCxhQUFMLENBQW1CSyxLQUFuQixDQUF5QmIsYUFBekI7QUFDRDs7QUFyQjJDOzs7ZUF5Qi9CQyxhIiwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgcHJvbWlzZS9wcmVmZXItYXdhaXQtdG8tY2FsbGJhY2tzICovXG5pbXBvcnQgU3lzbG9nRGVjb2RlciBmcm9tICcuL3RyYW5zZm9ybWVyL3N5c2xvZy1kZWNvZGVyJztcbmltcG9ydCB7IEtCIH0gZnJvbSAnLi4vY29uc3RhbnRzJztcbmltcG9ydCB7IEJhc2VTZXJ2aWNlU29ja2V0IH0gZnJvbSAnLi4vYmFzZS1zZXJ2aWNlJztcblxuXG4vL1dlIGp1c3QgbmVlZCB0byB3cml0ZSBhbnkgZGF0YSB0byB0aGUgY2xpZW50LiBJdCBkb2Vzbid0IG1hdHRlciB3aGF0IHdlIHNlbmRcbmNvbnN0IFNZU0xPR19TRVJWSUNFX05BTUUgPSAnY29tLmFwcGxlLnN5c2xvZ19yZWxheSc7XG5jb25zdCBTVEFSVF9NRVNTQUdFID0gJ3N0YXJ0JztcblxuY2xhc3MgU3lzbG9nU2VydmljZSBleHRlbmRzIEJhc2VTZXJ2aWNlU29ja2V0IHtcbiAgY29uc3RydWN0b3IgKHNvY2tldENsaWVudCkge1xuICAgIHN1cGVyKHNvY2tldENsaWVudCk7XG5cbiAgICB0aGlzLl9kZWNvZGVyID0gbmV3IFN5c2xvZ0RlY29kZXIoNSAqIEtCKTtcbiAgICB0aGlzLl9zb2NrZXRDbGllbnQucGlwZSh0aGlzLl9kZWNvZGVyKTtcblxuICB9XG4gIC8qKiBUaGUgY2FsbGJhY2sgZnVuY3Rpb24gd2hpY2ggd2lsbCBiZSBjYWxsZWQgZHVyaW5nIGxvZyBsaXN0ZW5pbmdcbiAgICogQG5hbWUgTG9nQ2FsbGJhY2tcbiAgICogQGZ1bmN0aW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBsb2cgVGhlIGxvZyB0aGF0IGlzIHNlbnQgZnJvbSB0aGUgcGhvbmVcbiAgKi9cblxuICAvKipcbiAgICogU3RhcnQgcmVjaWV2aW5nIGxvZ3MgZnJvbSB0aGUgcGhvbmUuIFRoZSBjYWxsYmFjayB3aGVuIGEgbG9nIGlzIHJlY2lldmVkXG4gICAqIEBwYXJhbSB7TG9nQ2FsbGJhY2t9IGNhbGxiYWNrXG4gICAqL1xuICBzdGFydCAoY2FsbGJhY2spIHtcbiAgICB0aGlzLl9kZWNvZGVyLm9uKCdkYXRhJywgY2FsbGJhY2spO1xuICAgIHRoaXMuX3NvY2tldENsaWVudC53cml0ZShTVEFSVF9NRVNTQUdFKTtcbiAgfVxufVxuXG5leHBvcnQgeyBTeXNsb2dTZXJ2aWNlLCBTWVNMT0dfU0VSVklDRV9OQU1FIH07XG5leHBvcnQgZGVmYXVsdCBTeXNsb2dTZXJ2aWNlO1xuIl0sImZpbGUiOiJsaWIvc3lzbG9nL2luZGV4LmpzIiwic291cmNlUm9vdCI6Ii4uLy4uLy4uIn0=

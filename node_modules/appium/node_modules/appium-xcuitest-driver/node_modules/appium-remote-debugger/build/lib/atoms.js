"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getAtoms = getAtoms;
exports.default = void 0;

require("source-map-support/register");

var _appiumSupport = require("appium-support");

var _path = _interopRequireDefault(require("path"));

var _lodash = _interopRequireDefault(require("lodash"));

const atomsCache = {};

async function getAtoms(atomName) {
  const atomFileName = __filename.includes('build/lib/atoms') ? _path.default.resolve(__dirname, '..', '..', 'atoms', `${atomName}.js`) : _path.default.resolve(__dirname, '..', 'atoms', `${atomName}.js`);

  if (!_lodash.default.has(atomsCache, atomName)) {
    try {
      atomsCache[atomName] = await _appiumSupport.fs.readFile(atomFileName);
    } catch (e) {
      throw new Error(`Unable to load Atom '${atomName}' from file '${atomFileName}'`);
    }
  }

  return atomsCache[atomName];
}

var _default = getAtoms;
exports.default = _default;require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9hdG9tcy5qcyJdLCJuYW1lcyI6WyJhdG9tc0NhY2hlIiwiZ2V0QXRvbXMiLCJhdG9tTmFtZSIsImF0b21GaWxlTmFtZSIsIl9fZmlsZW5hbWUiLCJpbmNsdWRlcyIsInBhdGgiLCJyZXNvbHZlIiwiX19kaXJuYW1lIiwiXyIsImhhcyIsImZzIiwicmVhZEZpbGUiLCJlIiwiRXJyb3IiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUdBLE1BQU1BLFVBQVUsR0FBRyxFQUFuQjs7QUFFQSxlQUFlQyxRQUFmLENBQXlCQyxRQUF6QixFQUFtQztBQUNqQyxRQUFNQyxZQUFZLEdBQUdDLFVBQVUsQ0FBQ0MsUUFBWCxDQUFvQixpQkFBcEIsSUFDbkJDLGNBQUtDLE9BQUwsQ0FBYUMsU0FBYixFQUF3QixJQUF4QixFQUE4QixJQUE5QixFQUFvQyxPQUFwQyxFQUE4QyxHQUFFTixRQUFTLEtBQXpELENBRG1CLEdBRW5CSSxjQUFLQyxPQUFMLENBQWFDLFNBQWIsRUFBd0IsSUFBeEIsRUFBOEIsT0FBOUIsRUFBd0MsR0FBRU4sUUFBUyxLQUFuRCxDQUZGOztBQUtBLE1BQUksQ0FBQ08sZ0JBQUVDLEdBQUYsQ0FBTVYsVUFBTixFQUFrQkUsUUFBbEIsQ0FBTCxFQUFrQztBQUNoQyxRQUFJO0FBQ0ZGLE1BQUFBLFVBQVUsQ0FBQ0UsUUFBRCxDQUFWLEdBQXVCLE1BQU1TLGtCQUFHQyxRQUFILENBQVlULFlBQVosQ0FBN0I7QUFDRCxLQUZELENBRUUsT0FBT1UsQ0FBUCxFQUFVO0FBQ1YsWUFBTSxJQUFJQyxLQUFKLENBQVcsd0JBQXVCWixRQUFTLGdCQUFlQyxZQUFhLEdBQXZFLENBQU47QUFDRDtBQUNGOztBQUVELFNBQU9ILFVBQVUsQ0FBQ0UsUUFBRCxDQUFqQjtBQUNEOztlQUdjRCxRIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZnMgfSBmcm9tICdhcHBpdW0tc3VwcG9ydCc7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5cblxuY29uc3QgYXRvbXNDYWNoZSA9IHt9O1xuXG5hc3luYyBmdW5jdGlvbiBnZXRBdG9tcyAoYXRvbU5hbWUpIHtcbiAgY29uc3QgYXRvbUZpbGVOYW1lID0gX19maWxlbmFtZS5pbmNsdWRlcygnYnVpbGQvbGliL2F0b21zJykgP1xuICAgIHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsICcuLicsICcuLicsICdhdG9tcycsIGAke2F0b21OYW1lfS5qc2ApIDpcbiAgICBwYXRoLnJlc29sdmUoX19kaXJuYW1lLCAnLi4nLCAnYXRvbXMnLCBgJHthdG9tTmFtZX0uanNgKTtcblxuICAvLyBjaGVjayBpZiB3ZSBoYXZlIGFscmVhZHkgbG9hZGVkIGFuIGNhY2hlZCB0aGlzIGF0b21cbiAgaWYgKCFfLmhhcyhhdG9tc0NhY2hlLCBhdG9tTmFtZSkpIHtcbiAgICB0cnkge1xuICAgICAgYXRvbXNDYWNoZVthdG9tTmFtZV0gPSBhd2FpdCBmcy5yZWFkRmlsZShhdG9tRmlsZU5hbWUpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVW5hYmxlIHRvIGxvYWQgQXRvbSAnJHthdG9tTmFtZX0nIGZyb20gZmlsZSAnJHthdG9tRmlsZU5hbWV9J2ApO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBhdG9tc0NhY2hlW2F0b21OYW1lXTtcbn1cblxuZXhwb3J0IHsgZ2V0QXRvbXMgfTtcbmV4cG9ydCBkZWZhdWx0IGdldEF0b21zO1xuIl0sImZpbGUiOiJsaWIvYXRvbXMuanMiLCJzb3VyY2VSb290IjoiLi4vLi4ifQ==
